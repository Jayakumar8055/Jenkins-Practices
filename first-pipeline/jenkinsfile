pipeline {
    agent {
        docker {image ''}
    }
    stages {
        stage('Checkout') {
            steps {
                // Clone the repo
                git 'https://github.com/Jayakumar8055/Jenkins-Practices'
            }
        }
    stage('Build') {
        steps {
            script {
                    // Assuming you have a Maven project
                    if (fileExists('pom.xml')) {
                        // Use Maven to build the project
                        sh 'mvn clean package'
                    } else if (fileExists('build.gradle')) {
                        // Use Gradle to build the project
                        sh './gradlew build'
                    } else {
                        // Use javac to compile HelloWorld.java if it's a simple project
                        sh 'javac HelloWorld.java'
                    }
                }
        }
    }

    stage('Test') {
        steps {
            script {
                    // Run tests if available
                    if (fileExists('pom.xml')) {
                        sh 'mvn test'
                    } else if (fileExists('build.gradle')) {
                        sh './gradlew test'
                    } else {
                        echo 'No test scripts found'
                    }
                }
        }
    }
    stage('Deploy') {
            steps {
                script {
                    // Simple deployment - can be replaced with more complex deployment logic
                    if (fileExists('pom.xml') || fileExists('build.gradle')) {
                        echo 'Deploying application'
                        // Add deployment steps here, e.g., copying files to a server, starting a service, etc.
                    } else {
                        // Run the compiled Java application
                        sh 'java HelloWorld'
                    }
                }
            }
        }
    }
}